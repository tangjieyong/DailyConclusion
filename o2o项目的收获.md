

2019/5/8 

- mybatis动态sql语句的优点就在于对于大量复杂的业务逻辑可以通过数量很少的动态sql语句进行实现，在动态sql语句中通过判断传入值的不同来执行不同的具体sql语句
- service层若使用事务，要在service层对应的spring配置文件中配置声明式事务
- service中的业务若构成事务则要用try来包围住，通过抛出运行时异常的方式来触发事务的回滚，代码使用try来包裹是因为这些操作有原生的异常，而业务逻辑方面的异常可以使用 throw new RuntimeException的方式

2019/5/9

-  一张数据表对应一个实体类，数据表中的字段与类的属性一一对应，数据表中的外键在实体类中对应为引用数据类型，类型为主表的实体类对象，根据业务需要，有时需要进行双向的关联，即创建从表所对应的实体类对象类型的集合

- 对数据库的查询操作会返回一个bean，可以对这个bean进行dto封装，让其包含操作的状态码和操作的状态信息，返回查询结果时返回的是该dto类型的bean

- 对枚举的理解：

   枚举类似于类，可以在枚举中定义成员变量，构造方法和set/get方法，一般会将构造方法私有化，并且不提供set方法，可以像操作类对象那样来操作枚举常量，枚举常量可以直接使用枚举类名.枚举常量的方式来访问

  在定义了成员变量和构造方法之后可以定义枚举常量，类似于使用构造方法创建对象，枚举常量一般使用大写字母，并且每个常量之间使用逗号隔开，最后一个常量的后面加上分号

  简单的枚举类中只交代常量名称即可，较复杂的枚举类一般要自定义枚举常量，枚举常量可以理解为map,大多数的枚举常量一般封装一个状态码和状态描述

  定义好的枚举常量外界要可以访问到，主要通过以下两种方式：

  1. 提供共有的静态方法，传入状态码，返回包含对应状态码的枚举常量
  2. 在枚举类内定义一个字符串类型的静态常量，主要应用在controller中，将静态常量和枚举常量同时保存在域对象中



   2019/5/12

- 业务层设计的接口与dao层的接口会不同，dao层的接口返回值返回的是数据库查询的直接返回值，传递给业务层进行进一步的操作，业务层接口的返回值传递给controller进行操作，因此会在dao层返回值的基础上进行进一步封装，dao层方法的参数有时会与业务层接口方法参数不同。mybatis的动态sql语句可以对传入的对象类型参数进行判断，因此应该把dao层的接口方法参数设置为JavaBean类型
- 在设计接口方法的时候要仔细去思考接口方法的返回值类型和参数类型      
- 若要在mapper.xml中判断传入对象参数类型中基本数据类型的非空情况 ，最好在dao接口中对应方法中将参数之前使用@Param为参数取别名，便于在mapper.xml中指定对应参数的属性
- 对象，map,Json三者有时候可以指代同一个东西
- 在前后端分离的设计中，controller不用再向域对象中存放值，也不用请求跳转到指定的jsp页面（前后端分离没有jsp了），前后端分离的架构中，前端是主导，页面通过AJAX向服务器发起请求，controller只要将业务层的数据进行传递，创建一个map,将业务层返回的各项对象封装好的数据封装在map中，然后将map转化为json数据格式，（模仿model）向页面写Json数据即可，页面的请求跳转也不再需要controller，使用JS即可完成，跳转到新的页面，页面加载完毕会触发ajax操作完成动态数据的填充。
- JS实现页面的跳转
  1.    window.location.href=""使用绝对路径

2019/5/13

- html和jsp不要放在WEB-INF目录下

- SpringMVC参数绑定应用在前端传递来的键值对数据，比如json,或者表单数据

- 使用AJAX向后端发送数据第一种方式可以创建一个JSON对象，将页面的键值对封装到json对象中，向服务器发送json对象，也可以new 一个formData，将键值对append到formData中，向服务器发送formData

- **若使用Ajax发送json数据那么一定要在Ajax内指明contentType:application/json**

- **若使用AJAX发送FormData一定要在AJAX内指明**

  ```
  processData: false,
  contentType: false
  ```

- formData为表单数据对象，可以理解为创建该对象就等同于创建一个虚拟的表单，可以使用append("","")向formData 中添加键值对，只允许字符串和文件数据类型，此时的formData对象就等同于一个表单，formData内的键值对可以像表单那样使用SpringMVC 的参数绑定，将键值对映射到方法的JavaBean类型的参数中

- 在JS中判断文本框中是否有值使用if(!文本框的值)来表示文本框没输入值的情况



2019/5/17

- 在进行多表查询的时候往往需要定义resultType，多表查询查到的字段要映射到javabean的对象属性的属性上，而单表查询往往都是将数据库中的字段映射到javabean的基本数据类型上，只要数据库中的字段名和javabean的属性名一致或者驼峰命名转换之后一致即可完成自动映射
- 多表查询出来的值一般是xxx.属性名这种格式，例如： select a.name,a.age.....而mybatis在映射的时候会自动将.之前的简称去掉，因此如果出现两张表的字段相同则需要将字段进行重命名否则会出现映射混乱，比如select a.name ,b.name......因为去掉简称之后都为name，会出现混淆 可以为第二个字段重命名 as myname
- dao层接口的方法尽量设计的通用一些，可以通过少量的几个接口方法应付更多的业务层请求，因为mapper.xml中可以对传入的参数进行判断从而动态执行不同的sql语句，在mapper.xml中应该使用if对传入的参数进行多种可能性的检验以此来调用不同的sql实现不同的业务逻辑

2019/5/18

-    spring框架做Junit单元测试时要在Junit中引入Spring test测试模块，并且要读取spring的配置文件，否则ioc时会出现空指针异常

  ```java
  @RunWith(SpringJUnit4ClassRunner.class)
  @ContextConfiguration({ "涉及的spring配置文件" })
  ```
